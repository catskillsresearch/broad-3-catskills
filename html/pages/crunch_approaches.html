<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crunch Approaches - Spatial Transcriptomics</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <header>
        <h1>Crunch Approaches for Spatial Transcriptomics Analysis</h1>
    </header>
    <nav>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="getting_started.html">Getting Started</a></li>
            <li><a href="data_structure.html">Data Structure</a></li>
            <li><a href="synthetic_datasets.html">Synthetic Datasets</a></li>
            <li><a href="deepspot_architecture.html">DeepSpot Architecture</a></li>
            <li><a href="crunch_approaches.html" class="active">Crunch Approaches</a></li>
            <li><a href="unified_approach.html">Unified Approach</a></li>
            <li><a href="process_flow.html">Process Flow</a></li>
        </ul>
    </nav>
    <main>
        <section>
            <h2>Overview of Crunch Approaches</h2>
            <p>
                The Broad Institute IBD Challenge was divided into three "crunches," each focusing on different aspects of spatial transcriptomics analysis. 
                This page provides a detailed overview of the approaches developed for each crunch and how they complement each other in our unified solution.
            </p>
        </section>

        <section>
            <h2>Crunch 1: DeepSpot</h2>
            <p>
                DeepSpot was developed for Crunch 1 of the Broad Institute IBD Challenge, focusing on predicting the expression of 460 measured genes 
                from H&E pathology images. It established the foundation for our spatial transcriptomics analysis pipeline.
            </p>
            
            <h3>Key Features of DeepSpot</h3>
            <ul>
                <li><strong>Multi-level Spatial Context Integration</strong>: Processes information at spot, sub-spot, and neighborhood levels</li>
                <li><strong>Permutation-invariant Deep-set Neural Networks</strong>: Handles variable numbers of sub-spots and neighbors</li>
                <li><strong>Pre-trained Pathology Foundation Models</strong>: Leverages transfer learning from large pathology datasets</li>
                <li><strong>Ensemble Learning Techniques</strong>: Combines multiple models for improved robustness</li>
                <li><strong>Specialized Loss Functions</strong>: Optimized for Spearman correlation</li>
            </ul>
            
            <h3>DeepSpot Architecture</h3>
            <p>
                The DeepSpot architecture consists of several key components:
            </p>
            <ol>
                <li><strong>Feature Extraction</strong>: Uses ResNet50 to extract features from H&E images</li>
                <li><strong>Phi Networks</strong>: Process features at each spatial level (spot, sub-spot, neighbor)</li>
                <li><strong>Aggregation Operations</strong>: Combine information across sub-spots and neighbors using permutation-invariant operations</li>
                <li><strong>Rho Networks</strong>: Generate final predictions from aggregated features</li>
            </ol>
            
            <h3>Performance Characteristics</h3>
            <p>
                DeepSpot excels at gene-wise Spearman correlation, achieving a score of 16.168 in the Crunch 1 evaluation. 
                This indicates strong performance in predicting the expression patterns of individual genes across cells.
            </p>
            
            <h3>Limitations</h3>
            <p>
                While DeepSpot performs well on gene-wise metrics, it has limitations in cell-wise performance, 
                with a cell-wise Spearman correlation score of 45.937, which is lower than the Tarandros approach.
            </p>
        </section>

        <section>
            <h2>Crunch 2: Tarandros</h2>
            <p>
                Tarandros was developed for Crunch 2 of the Broad Institute IBD Challenge, focusing on inferring the expression of 
                18,157 unmeasured genes based on the predictions from Crunch 1 and a single-cell RNA sequencing reference dataset.
            </p>
            
            <h3>Key Features of Tarandros</h3>
            <ul>
                <li><strong>Similarity-based Gene Inference</strong>: Uses similarity between measured gene expressions to infer unmeasured genes</li>
                <li><strong>Cell Type Classification</strong>: Identifies cell types to improve prediction accuracy</li>
                <li><strong>Reference Dataset Integration</strong>: Leverages single-cell RNA-seq reference data</li>
                <li><strong>Cell-wise Optimization</strong>: Prioritizes cell-wise Spearman correlation</li>
                <li><strong>Spatial Context Preservation</strong>: Maintains local spatial relationships in predictions</li>
            </ul>
            
            <h3>Tarandros Approach</h3>
            <p>
                The Tarandros approach consists of several key steps:
            </p>
            <ol>
                <li><strong>Cell Type Identification</strong>: Classifies cells based on measured gene expression</li>
                <li><strong>Similarity Computation</strong>: Calculates similarity between predicted and reference expression profiles</li>
                <li><strong>Expression Transfer</strong>: Transfers unmeasured gene expression from reference to target cells</li>
                <li><strong>Spatial Refinement</strong>: Refines predictions using spatial context</li>
            </ol>
            
            <h3>Performance Characteristics</h3>
            <p>
                Tarandros excels at cell-wise Spearman correlation, achieving a score of 52.792 in the Crunch 2 evaluation, 
                significantly higher than DeepSpot's 45.937. This indicates strong performance in predicting the overall expression 
                profile of individual cells.
            </p>
            
            <h3>Limitations</h3>
            <p>
                While Tarandros performs well on cell-wise metrics, it has limitations in gene-wise performance, 
                with a gene-wise Spearman correlation score of 14.8, which is lower than DeepSpot's 16.168.
            </p>
        </section>

        <section>
            <h2>Crunch 3: LogFC Method</h2>
            <p>
                The LogFC method was developed for Crunch 3 of the Broad Institute IBD Challenge, focusing on ranking genes 
                based on their ability to differentiate between dysplastic and non-dysplastic tissue regions.
            </p>
            
            <h3>Key Features of LogFC Method</h3>
            <ul>
                <li><strong>Log Fold Change Calculation</strong>: Computes the log fold change between dysplastic and non-dysplastic regions</li>
                <li><strong>Statistical Significance Testing</strong>: Assesses the significance of differential expression</li>
                <li><strong>Gene Ranking</strong>: Ranks genes based on their discriminative power</li>
                <li><strong>Visualization Capabilities</strong>: Provides tools for visualizing differential expression</li>
            </ul>
            
            <h3>LogFC Approach</h3>
            <p>
                The LogFC approach consists of several key steps:
            </p>
            <ol>
                <li><strong>Group Definition</strong>: Defines dysplastic and non-dysplastic groups based on cell labels</li>
                <li><strong>Expression Aggregation</strong>: Aggregates expression values within each group</li>
                <li><strong>Fold Change Calculation</strong>: Calculates log fold change between groups</li>
                <li><strong>Statistical Testing</strong>: Performs statistical tests to assess significance</li>
                <li><strong>Ranking</strong>: Ranks genes based on absolute log fold change values</li>
            </ol>
            
            <h3>Performance Characteristics</h3>
            <p>
                The LogFC method is particularly effective at identifying genes that are differentially expressed between 
                dysplastic and non-dysplastic regions, providing valuable insights for understanding disease mechanisms.
            </p>
        </section>

        <section>
            <h2>Unified Approach: Combining the Best of All Crunches</h2>
            <p>
                Our unified approach combines the strengths of all three crunches into a single, integrated solution:
            </p>
            
            <h3>Integration Strategy</h3>
            <ul>
                <li><strong>DeepSpot Architecture</strong>: Uses the sophisticated neural network architecture from Crunch 1</li>
                <li><strong>Cell-wise Optimization</strong>: Incorporates the cell-wise focus from Tarandros (Crunch 2)</li>
                <li><strong>Gene Ranking</strong>: Integrates the LogFC method from Crunch 3</li>
                <li><strong>Balanced Loss Function</strong>: Combines gene-wise and cell-wise metrics with configurable weights</li>
                <li><strong>End-to-End Pipeline</strong>: Provides a seamless workflow from raw data to final results</li>
            </ul>
            
            <h3>Performance Improvements</h3>
            <p>
                By combining the strengths of all three approaches, our unified solution achieves:
            </p>
            <ul>
                <li>Improved gene-wise Spearman correlation compared to Tarandros alone</li>
                <li>Improved cell-wise Spearman correlation compared to DeepSpot alone</li>
                <li>Comprehensive gene ranking capabilities from the LogFC method</li>
                <li>More robust performance across different datasets and conditions</li>
            </ul>
            
            <h3>Further Details</h3>
            <p>
                For more detailed information about our unified approach, please see the <a href="unified_approach.html">Unified Approach</a> page.
            </p>
        </section>

        <section>
            <h2>Comparison of Approaches</h2>
            <table>
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>DeepSpot (Crunch 1)</th>
                        <th>Tarandros (Crunch 2)</th>
                        <th>LogFC (Crunch 3)</th>
                        <th>Unified Approach</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Primary Focus</td>
                        <td>Measured gene prediction</td>
                        <td>Unmeasured gene inference</td>
                        <td>Gene ranking</td>
                        <td>Comprehensive analysis</td>
                    </tr>
                    <tr>
                        <td>Gene-wise Spearman</td>
                        <td>16.168</td>
                        <td>14.8</td>
                        <td>N/A</td>
                        <td>16.0+</td>
                    </tr>
                    <tr>
                        <td>Cell-wise Spearman</td>
                        <td>45.937</td>
                        <td>52.792</td>
                        <td>N/A</td>
                        <td>52.0+</td>
                    </tr>
                    <tr>
                        <td>Architecture</td>
                        <td>Deep-set neural networks</td>
                        <td>Similarity-based</td>
                        <td>Statistical</td>
                        <td>Hybrid</td>
                    </tr>
                    <tr>
                        <td>Reference Data</td>
                        <td>No</td>
                        <td>Yes</td>
                        <td>No</td>
                        <td>Yes</td>
                    </tr>
                    <tr>
                        <td>Spatial Context</td>
                        <td>Strong</td>
                        <td>Moderate</td>
                        <td>Weak</td>
                        <td>Strong</td>
                    </tr>
                    <tr>
                        <td>Gene-Gene Relationships</td>
                        <td>Implicit</td>
                        <td>Through reference</td>
                        <td>No</td>
                        <td>Explicit (Graph Attention)</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Catskills Research. All rights reserved.</p>
    </footer>
</body>
</html>
